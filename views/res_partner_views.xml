<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Partner Views Extension -->
    <record id="view_partner_form_brevo" model="ir.ui.view">
        <field name="name">res.partner.form.brevo</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='sales_purchases']" position="after">
                <page string="Brevo Integration" name="brevo_integration">
                    <group>
                        <group string="Brevo Information">
                            <field name="brevo_id"/>
                            <field name="brevo_sync_status"/>
                            <field name="brevo_last_sync"/>
                            <field name="brevo_has_email" invisible="1"/>
                        </group>
                        <group string="Brevo Lists">
                            <field name="brevo_lists" widget="many2many_tags"/>
                        </group>
                        <group string="Brevo Tags">
                            <field name="brevo_tags" widget="many2many_tags"/>
                        </group>
                    </group>
                    <group string="Sync Status">
                        <group>
                            <field name="brevo_sync_needed"/>
                            <field name="brevo_created_date"/>
                            <field name="brevo_modified_date"/>
                        </group>
                        <group>
                            <field name="brevo_sync_error" readonly="1"/>
                        </group>
                    </group>
                    <div class="oe_button_box" name="button_box">
                        <button name="sync_to_brevo" string="Sync to Brevo" type="object" class="oe_stat_button" icon="fa-sync" invisible="brevo_has_email == False"/>
                    </div>
                </page>
                <page string="Brevo Fields" name="brevo_fields">
                    <group string="Personal Information">
                        <group>
                            <field name="x_brevo_age"/>
                            <field name="x_brevo_gender"/>
                            <field name="x_brevo_middlename"/>
                            <field name="x_brevo_nickname"/>
                        </group>
                        <group>
                            <field name="x_brevo_fax"/>
                            <field name="x_brevo_skype"/>
                            <field name="x_brevo_linkedin"/>
                            <field name="x_brevo_twitter"/>
                        </group>
                    </group>
                    <group string="Social Media">
                        <group>
                            <field name="x_brevo_facebook"/>
                            <field name="x_brevo_instagram"/>
                            <field name="x_brevo_youtube"/>
                            <field name="x_brevo_tiktok"/>
                        </group>
                    </group>
                    <group string="Location">
                        <group>
                            <field name="x_brevo_latitude"/>
                            <field name="x_brevo_longitude"/>
                        </group>
                    </group>
                    <group string="Company Information">
                        <group>
                            <field name="x_brevo_department"/>
                            <field name="x_brevo_company_size"/>
                            <field name="x_brevo_annual_revenue"/>
                            <field name="x_brevo_employees"/>
                        </group>
                        <group>
                            <field name="x_brevo_company_website"/>
                            <field name="x_brevo_company_phone"/>
                            <field name="x_brevo_company_email"/>
                        </group>
                    </group>
                    <group string="Marketing & Engagement">
                        <group>
                            <field name="x_brevo_source"/>
                            <field name="x_brevo_campaign"/>
                            <field name="x_brevo_utm_medium"/>
                            <field name="x_brevo_utm_campaign"/>
                        </group>
                        <group>
                            <field name="x_brevo_utm_term"/>
                            <field name="x_brevo_utm_content"/>
                            <field name="x_brevo_referrer"/>
                            <field name="x_brevo_landing_page"/>
                        </group>
                    </group>
                    <group string="Subscription & Communication">
                        <group>
                            <field name="x_brevo_subscriber_type"/>
                            <field name="x_brevo_subscription_status"/>
                            <field name="x_brevo_opt_in_date"/>
                            <field name="x_brevo_opt_out_date"/>
                        </group>
                        <group>
                            <field name="x_brevo_last_activity"/>
                            <field name="x_brevo_last_open"/>
                            <field name="x_brevo_last_click"/>
                            <field name="x_brevo_email_frequency"/>
                        </group>
                        <group>
                            <field name="x_brevo_communication_preference"/>
                        </group>
                    </group>
                    <group string="Custom Fields">
                        <group>
                            <field name="x_brevo_custom_field_1"/>
                            <field name="x_brevo_custom_field_2"/>
                            <field name="x_brevo_custom_field_3"/>
                            <field name="x_brevo_custom_field_4"/>
                        </group>
                        <group>
                            <field name="x_brevo_custom_field_5"/>
                        </group>
                    </group>
                    <group string="CRM & Sales">
                        <group>
                            <field name="x_brevo_segment"/>
                            <field name="x_brevo_score"/>
                            <field name="x_brevo_priority"/>
                            <field name="x_brevo_status"/>
                        </group>
                        <group>
                            <field name="x_brevo_stage"/>
                            <field name="x_brevo_type"/>
                            <field name="x_brevo_rating"/>
                            <field name="x_brevo_salary"/>
                        </group>
                        <group>
                            <field name="x_brevo_budget"/>
                        </group>
                    </group>
                    <group string="Interests & Demographics">
                        <group>
                            <field name="x_brevo_interest"/>
                            <field name="x_brevo_hobby"/>
                            <field name="x_brevo_education"/>
                            <field name="x_brevo_experience"/>
                        </group>
                        <group>
                            <field name="x_brevo_skills"/>
                            <field name="x_brevo_certifications"/>
                            <field name="x_brevo_languages"/>
                        </group>
                    </group>
                    <group string="Communication Preferences">
                        <group>
                            <field name="x_brevo_availability"/>
                            <field name="x_brevo_preferred_contact_time"/>
                            <field name="x_brevo_preferred_contact_method"/>
                        </group>
                    </group>
                    <group string="GDPR & Consent">
                        <group>
                            <field name="x_brevo_consent_date"/>
                            <field name="x_brevo_consent_source"/>
                            <field name="x_brevo_consent_text"/>
                        </group>
                        <group>
                            <field name="x_brevo_gdpr_consent"/>
                            <field name="x_brevo_marketing_consent"/>
                            <field name="x_brevo_newsletter_consent"/>
                        </group>
                        <group>
                            <field name="x_brevo_sms_consent"/>
                            <field name="x_brevo_call_consent"/>
                            <field name="x_brevo_email_consent"/>
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <record id="view_partner_tree_brevo" model="ir.ui.view">
        <field name="name">res.partner.tree.brevo</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='category_id']" position="after">
                <field name="brevo_sync_status" optional="hide"/>
                <field name="brevo_last_sync" optional="hide"/>
            </xpath>
        </field>
    </record>

    <!-- CRM Lead Views Extension -->
    <record id="view_crm_lead_form_brevo" model="ir.ui.view">
        <field name="name">crm.lead.form.brevo</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//notebook" position="inside">
                <page string="Brevo Integration" name="brevo_integration">
                    <group>
                        <group string="Brevo Information">
                            <field name="brevo_lead_id"/>
                            <field name="brevo_source"/>
                            <field name="brevo_booking_id"/>
                            <field name="brevo_sync_status"/>
                        </group>
                        <group string="Booking Details">
                            <field name="brevo_booking_time"/>
                            <field name="brevo_created_date"/>
                            <field name="brevo_last_sync"/>
                        </group>
                    </group>
                    <group string="Booking Notes">
                        <field name="brevo_booking_notes" nolabel="1"/>
                    </group>
                    <group string="Sync Status">
                        <group>
                            <field name="brevo_sync_error" readonly="1"/>
                        </group>
                    </group>
                    <div class="oe_button_box" name="button_box">
                        <button name="sync_to_brevo" string="Sync to Brevo" type="object" class="oe_stat_button" icon="fa-sync"/>
                    </div>
                </page>
            </xpath>
        </field>
    </record>

    <record id="view_crm_lead_tree_brevo" model="ir.ui.view">
        <field name="name">crm.lead.tree.brevo</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_tree_view_leads"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='user_id']" position="after">
                <field name="brevo_source" optional="hide"/>
                <field name="brevo_sync_status" optional="hide"/>
            </xpath>
        </field>
    </record>

</odoo>
